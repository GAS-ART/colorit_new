function _(s){const t=document.getElementById(s),v=document.getElementById("body"),r=t.querySelector(".close-popup"),i=t.querySelector(".popup__button"),e=t.querySelector(".popup__loading"),c=t.querySelector(".preview-file")||!1,g=t.querySelectorAll("input");t.classList.add("open"),v.classList.add("lock"),r.addEventListener("click",function(n){m(t),n.preventDefault()}),i.addEventListener("click",function(){m(t)});function m(n){n.classList.remove("open"),v.classList.remove("lock"),t.classList.remove("sent"),g.forEach(l=>{l.value||(l.previousElementSibling.classList.remove("error"),l.classList.remove("error"),l.nextElementSibling.classList.remove("error"),l.nextElementSibling.innerHTML="")}),c&&(c.innerHTML="")}t.addEventListener("mousedown",function(n){!n.target.closest(".popup__body")&&!e.classList.contains("active")&&m(t)})}document.addEventListener("click",B);const w=document.querySelectorAll(".link-on-popup");w.forEach(s=>{s.addEventListener("click",t=>{_(t.target.dataset.popupId)})});const d=document.querySelector(".language-btn");d.addEventListener("click",function(s){window.matchMedia("(pointer: coarse)").matches&&(d.classList.contains("active")||s.preventDefault(),d.classList.toggle("active"))});const A=document.querySelectorAll("form"),a={name:['Не заполнено поле "ВАШЕ ИМЯ"',`Не заповнено поле "ВАШЕ ІМ'Я"`,'Поле "ИМЯ" должно иметь 2 или больше символов',`Поле "ІМ'Я" повинно мати 2 або більше символів`,'Поле "ИМЯ" должно иметь не больше 80 символов',`Поле "ІМ'Я" повинно мати не більше 80 символів`,'Поле "ИМЯ" не может содержать цифры',`Поле "ІМ'Я" не може містити цифри`],phone:["Не верный формат номера телефона","Невірний формат номеру телефона",'Не заполнено поле "Номер телефона"','Не заповнено поле "Номер телефону"'],text:['Вы ввели слишком много символов в поле "Сообщение"','Ви ввели занадто багато символів у полі "Повідомлення"']};A.forEach(s=>{s.addEventListener("submit",async t=>{var n,l,E,S,b,f,x,h,y,T,q;t.preventDefault();const v=s.querySelector('input[name="_token"]').value,r=s.querySelector(".error-name"),i=s.querySelector(".error-phone"),e=s.querySelector(".error-text"),c=s.closest(".popup__row").previousElementSibling.previousElementSibling;c.classList.add("active");const g=new FormData(s),m="http://localhost:8000/send-main-form";try{const u=await fetch(m,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":v},method:"post",body:g,credentials:"same-origin"});if(u.ok)c.classList.remove("active"),s.closest(".popup").classList.add("sent"),r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error"),i.innerText="",i.classList.remove("error"),i.previousElementSibling.classList.remove("error"),i.previousElementSibling.previousElementSibling.classList.remove("error"),e&&(e.innerText="",e.classList.remove("error"),e.previousElementSibling.classList.remove("error"),e.previousElementSibling.previousElementSibling.classList.remove("error")),s.reset();else{const o=await u.json();c.classList.remove("active"),s.classList.contains("ru")?((n=o.errors)!=null&&n.name?(r.innerText=(l=o.errors)==null?void 0:l.name[0],r.classList.add("error"),r.previousElementSibling.classList.add("error"),r.previousElementSibling.previousElementSibling.classList.add("error"),console.log(r.previousElementSibling)):(r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error")),(E=o.errors)!=null&&E.phone?(i.innerText=(S=o.errors)==null?void 0:S.phone[0],i.classList.add("error"),i.previousElementSibling.classList.add("error"),i.previousElementSibling.previousElementSibling.classList.add("error")):(i.innerText="",i.classList.remove("error"),i.previousElementSibling.classList.remove("error"),i.previousElementSibling.previousElementSibling.classList.remove("error")),(b=o.errors)!=null&&b.text?(e.innerText=(f=o.errors)==null?void 0:f.text[0],e.classList.add("error"),e.previousElementSibling.classList.add("error"),e.previousElementSibling.previousElementSibling.classList.add("error")):!((x=o.errors)!=null&&x.text)&&e&&(e.innerText="",e.classList.remove("error"),e.previousElementSibling.classList.remove("error"),e.previousElementSibling.previousElementSibling.classList.remove("error"))):((h=o.errors)!=null&&h.name?(r.innerText=a.name[a.name.findIndex(p=>p==o.errors.name[0])+1],r.classList.add("error"),r.previousElementSibling.classList.add("error"),r.previousElementSibling.previousElementSibling.classList.add("error")):(r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error")),(y=o.errors)!=null&&y.phone?(i.innerText=a.phone[a.phone.findIndex(p=>p==o.errors.phone[0])+1],i.classList.add("error"),i.previousElementSibling.classList.add("error"),i.previousElementSibling.previousElementSibling.classList.add("error")):(i.innerText="",i.classList.remove("error"),i.previousElementSibling.classList.remove("error"),i.previousElementSibling.previousElementSibling.classList.remove("error")),(T=o.errors)!=null&&T.text?(e.innerText=a.text[a.text.findIndex(p=>p==o.errors.text[0])+1],e.classList.add("error"),e.previousElementSibling.classList.add("error"),e.previousElementSibling.previousElementSibling.classList.add("error")):!((q=o.errors)!=null&&q.text)&&e&&(e.innerText="",e.classList.remove("error"),e.previousElementSibling.classList.remove("error"),e.previousElementSibling.previousElementSibling.classList.remove("error")))}}catch(u){console.log(u)}})});const k=document.querySelector(".header-burger"),L=document.querySelector(".info-header__menu");L.addEventListener("click",()=>{k.classList.toggle("active"),L.classList.toggle("active")});const I=document.querySelectorAll("select");I.forEach(s=>{s.addEventListener("change",t=>{t.target.previousElementSibling.classList.add("inactive")})});function B(s){!s.target.closest(".header-burger")&&!s.target.classList.contains("info-header__menu")&&(k.classList.remove("active"),L.classList.remove("active")),s.target.closest(".language-btn")||d.classList.remove("active")}
